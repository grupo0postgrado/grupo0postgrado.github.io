<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Bike Availability Prediction</title>

    <!-- Bootstrap Core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Theme CSS -->
    <link href="css/clean-blog.min.css" rel="stylesheet">
    <link href="css/clean-blog.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet'
          type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800'
          rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <i class="fa fa-bars"></i>
            </button>
            <a class="navbar-brand" href="index.html">Blog Grupo 0</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#processing">Processing</a>
                </li>
                <li>
                    <a href="#enrichment">Enrichment</a>
                </li>
                <li>
                    <a href="#explore">Exploration</a>
                </li>
                <li>
                    <a href="#prediction">Prediction</a>
                </li>
                <li>
                    <a href="#cases">Study Cases</a>
                </li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

<!-- Page Header -->
<!-- Set your background image for this header on the line below. -->
<header class="intro-header">
    <img class="header-background" src="img/portada_bicing.jpg" alt="">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Bike Availability Prediction</h1>
                    <h2 class="subheading">Introduction to Data Science and Machine Learning</h2>
                    <span class="meta">Universitat de Barcelona, 26 de junio 2024</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <p>The purpose of this research is to predict the percentage of free docks based on the historical
                    data from each <a href="https://www.bicing.barcelona/">Bicing</a> station, a bicycle-sharing system
                    in Barcelona, Spain.</p>
                <p>The data used for the prediction was obtained from <a
                        href="https://opendata-ajuntament.barcelona.cat/">Open Data BCN</a>, providing information on
                    the number of bikes and available docks per station between 2020 and 2023. Additionally,
                    station-specific information such as the total number of docks and their coordinates was included
                    from <a href="https://drive.google.com/file/d/1MRBWDKh6D5773FfoJYv6vHKBCC1TasVO/view">this file</a>.
                </p>
                <h3 class="section-heading" id="processing">Processing</h3>
                <p>The project used Python for development, emphasizing the handling of large datasets with <a
                        href="https://www.dask.org/">Dask</a>. Dask was selected for its capability to process data
                    larger than available memory by parallelizing operations across multiple cores or distributed
                    computing clusters, providing substantial performance benefits over traditional tools like pandas.
                </p>
                <p>Firstly, a Dask DataFrame was created by concatenating raw records from all available months of data,
                    spanning from January 2020 to December 2023. Below are the initial records from this DataFrame:</p>
                <div style="overflow-x:auto;">
                    <table class="dataframe">
                        <thead>
                        <tr>
                            <th>&nbsp;</th>
                            <th>station_id</th>
                            <th>num_bikes_available</th>
                            <th>num_bikes_available_types.mechanical</th>
                            <th>num_bikes_available_types.ebike</th>
                            <th>num_docks_available</th>
                            <th>last_reported</th>
                            <th>is_charging_station</th>
                            <th>status</th>
                            <th>is_installed</th>
                            <th>is_renting</th>
                            <th>is_returning</th>
                            <th>last_updated</th>
                            <th>ttl</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <th>0</th>
                            <td>1.0</td>
                            <td>38.0</td>
                            <td>35.0</td>
                            <td>3.0</td>
                            <td>8</td>
                            <td>1672527561</td>
                            <td>True</td>
                            <td>IN_SERVICE</td>
                            <td>1.0</td>
                            <td>1.0</td>
                            <td>1</td>
                            <td>1.672528e+09</td>
                            <td>19.0</td>
                        </tr>
                        <tr>
                            <th>1</th>
                            <td>2.0</td>
                            <td>6.0</td>
                            <td>5.0</td>
                            <td>1.0</td>
                            <td>23</td>
                            <td>1672527391</td>
                            <td>True</td>
                            <td>IN_SERVICE</td>
                            <td>1.0</td>
                            <td>1.0</td>
                            <td>1</td>
                            <td>1.672528e+09</td>
                            <td>19.0</td>
                        </tr>
                        <tr>
                            <th>2</th>
                            <td>3.0</td>
                            <td>20.0</td>
                            <td>20.0</td>
                            <td>0.0</td>
                            <td>7</td>
                            <td>1672527440</td>
                            <td>True</td>
                            <td>IN_SERVICE</td>
                            <td>1.0</td>
                            <td>1.0</td>
                            <td>1</td>
                            <td>1.672528e+09</td>
                            <td>19.0</td>
                        </tr>
                        <tr>
                            <th>3</th>
                            <td>4.0</td>
                            <td>19.0</td>
                            <td>19.0</td>
                            <td>0.0</td>
                            <td>2</td>
                            <td>1672527516</td>
                            <td>True</td>
                            <td>IN_SERVICE</td>
                            <td>1.0</td>
                            <td>1.0</td>
                            <td>1</td>
                            <td>1.672528e+09</td>
                            <td>19.0</td>
                        </tr>
                        <tr>
                            <th>4</th>
                            <td>5.0</td>
                            <td>4.0</td>
                            <td>3.0</td>
                            <td>1.0</td>
                            <td>35</td>
                            <td>1672527342</td>
                            <td>True</td>
                            <td>IN_SERVICE</td>
                            <td>1.0</td>
                            <td>1.0</td>
                            <td>1</td>
                            <td>1.672528e+09</td>
                            <td>19.0</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <p>Next, the records were filtered to keep only the stations in service, and data transformation
                    began.</p>
                <p>Initially, the data was processed year by year, identifying discrepancies where records within a year
                    did not correspond to the year being processed, which led to their exclusion. Subsequently, the hour
                    from the <i>'last_reported'</i> column was extracted, and the percentage of free docks
                    (<i>'pct_free_docks'</i>) was computed using the columns <i>'num_docks_available'</i> and <i>'num_bikes_available'</i>.
                    This resulted in a new dataframe where data was grouped to calculate the average free docks per
                    station-hour.</p>
                <p>Finally, fields for the percentage of free docks from each of the previous 4 hours per record were
                    added, along with date-related columns formatted to match the required output format for prediction.
                    This process generated a <i>{year}_processed_file.csv</i> for every year with the processed data, as
                    shown below:</p>
                <div style="overflow-x:auto;">
                    <table class="dataframe">
                        <thead>
                        <tr>
                            <th>&nbsp;</th>
                            <th>station_id</th>
                            <th>sum_date</th>
                            <th>pct_free_docks</th>
                            <th>year</th>
                            <th>month</th>
                            <th>day</th>
                            <th>hour</th>
                            <th>ct1</th>
                            <th>ct2</th>
                            <th>ct3</th>
                            <th>ct4</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <th>0</th>
                            <td>52.0</td>
                            <td>2023-01-01 02:00:00</td>
                            <td>0.341667</td>
                            <td>2023</td>
                            <td>1</td>
                            <td>1</td>
                            <td>2</td>
                            <td>0.347222</td>
                            <td>0.423563</td>
                            <td>0.267337</td>
                            <td>0.266667</td>
                        </tr>
                        <tr>
                            <th>1</th>
                            <td>52.0</td>
                            <td>2023-01-01 07:00:00</td>
                            <td>0.483333</td>
                            <td>2023</td>
                            <td>1</td>
                            <td>1</td>
                            <td>7</td>
                            <td>0.552778</td>
                            <td>0.558333</td>
                            <td>0.527778</td>
                            <td>0.466667</td>
                        </tr>
                        <tr>
                            <th>2</th>
                            <td>52.0</td>
                            <td>2023-01-01 12:00:00</td>
                            <td>0.417720</td>
                            <td>2023</td>
                            <td>1</td>
                            <td>1</td>
                            <td>12</td>
                            <td>0.408333</td>
                            <td>0.444444</td>
                            <td>0.486111</td>
                            <td>0.483333</td>
                        </tr>
                        <tr>
                            <th>3</th>
                            <td>52.0</td>
                            <td>2023-01-01 17:00:00</td>
                            <td>0.239559</td>
                            <td>2023</td>
                            <td>1</td>
                            <td>1</td>
                            <td>17</td>
                            <td>0.286111</td>
                            <td>0.266667</td>
                            <td>0.327778</td>
                            <td>0.344444</td>
                        </tr>
                        <tr>
                            <th>4</th>
                            <td>52.0</td>
                            <td>2023-01-01 22:00:00</td>
                            <td>0.591667</td>
                            <td>2023</td>
                            <td>1</td>
                            <td>1</td>
                            <td>22</td>
                            <td>0.586111</td>
                            <td>0.516667</td>
                            <td>0.433333</td>
                            <td>0.348276</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <p>These dataframes, grouped by station-hour and separated by year, allow for easier manipulation. For
                    training the models, data from 2021 and 2022 was used, while data from 2023 was reserved for
                    validation. The year 2020 was excluded due to its significantly different behavior compared to the
                    other years, as detailed in the Exploration section below.</p>
                <p>Station-specific data was also added to incorporate geographical and operational details for each
                    station. Additional datasets believed to provide valuable insights into analyzing dock availability
                    patterns were included as well. These contributions will be elaborated upon in detail in the
                    Enrichment section.</p>

                <h3 class="section-heading" id="enrichment">Enrichment</h3>
                <p>Firstly, additional time-related columns were incorporated, including:</p>
                <ul>
                    <li>Day of the week</li>
                    <li>Time of day (Morning, Afternoon, Evening, Night)</li>
                </ul>
                <p>Additionally, a column indicating public holidays was added, using the public <a
                        href="https://opendata-ajuntament.barcelona.cat/data/en/dataset/calendari-festes-laborals">holiday
                    calendar of Catalonia</a>. This was based on the hypothesis that Bicing bikes usage strongly depends
                    on time of day and work/school days.</p>
                <p>Furthermore, to enrich the dataset with more geographical information, columns related to
                    neighborhoods were included, sourced from <a
                            href="https://opendata-ajuntament.barcelona.cat/data/es/dataset/20170706-districtes-barris">Open
                        Data BCN</a>. These additions are presumed to provide insights into different usage patterns
                    across geographic areas.</p>
                <p>Lastly, weather information from <a href="https://www.meteo.cat/">meteo.cat</a> was included to
                    supplement the dataset with climatic conditions, which are believed to significantly influence bikes
                    usage. The inclusion of weather data aims to understand if and how conditions like rain impact
                    Bicing usage patterns.</p>
                <p>To enrich the dataset, scikit-learn pipelines were used. This approach allowed for the consistent and
                    efficient application of all data transformations, scaling of numerical features, encoding and
                    addition of new time-related and geographical columns to any other dataset with the same input
                    format. It simplified the workflow and ensured reproducibility.</p>
                <p>Firstly, a merging pipeline was created to add all the attributes believed to enhance prediction
                    accuracy. This pipeline also included a step to discard records with null values, ensuring that the
                    dataset remains clean and reliable for analysis. Secondly, an encoding pipeline was defined. For
                    categorical variables, One-Hot Encoding was used, while for numerical variables, a SimpleImputer
                    with a median replacement strategy and a StandardScaler were applied to ensure comparability of
                    attributes.</p>
                <p>With these two pipelines, a dataset of 95 attributes was generated for training predictive models.
                    These variables correspond to the encoding of the following original features:</p>
                <ul>
                    <li>Day of the week</li>
                    <li>Holiday indicator</li>
                    <li>Time of day</li>
                    <li>Month</li>
                    <li>Neighborhood</li>
                    <li>Percentage of free docks from 1 to 4 hours before</li>
                    <li>Average temperature</li>
                    <li>Average relative humidity</li>
                    <li>Precipitation</li>
                    <li>Solar radiation</li>
                    <li>Average wind speed</li>
                </ul>
                <h3 class="section-heading" id="explore">Exploration</h3>
                <p>As background, it is important to note that between March 14, 2020, and June 21, 2020, Spain entered
                    a state of lockdown due to the <a
                            href="https://es.wikipedia.org/wiki/Confinamiento_por_la_pandemia_de_COVID-19_en_Espa%C3%B1a">COVID-19
                        pandemic</a>. This period is evident in the graph below, where the trend for free docks follows
                    a similar pattern for other years, with an increase from the beginning of the year until the start
                    of the summer. However, during the lockdown months in 2020, there is a significant decrease.
                </p>
                <div class="img-container">
                    <img class="single-img" src="img/covid_2020.jpg" alt="">
                </div>
                <span class="caption text-muted">Monthly comparison of the percentage of free docks between 2020-2023</span>
                <p>Due to the outlier behavior during the 2020 lockdown, where data significantly deviates from other
                    years, the 2020 data was excluded from model training. This ensures the predictive models are not
                    skewed by pandemic-related anomalies.</p>
                <h3 class="section-heading" id="prediction">Prediction</h3>
                <h3 class="subsection-heading">Linear regression</h3>
                <p>Firstly, a simple linear regression was developed. The following graph represents the absolute values
                    of the coefficients for each attribute based on the training data:</p>
                <div class="img-container">
                    <img class="single-img" src="img/coefs_lin_reg.jpg" alt="">
                </div>
                <span class="caption text-muted">Linear regression absolute value coefficients</span>
                <p>The most significant attributes for the model, as anticipated, are the percentages of free docks from
                    the two preceding hours, underscoring the strong temporal correlation between past and future
                    availability. Additionally, several neighborhoods emerge as important factors, indicating a
                    geographical relationship with bike usage patterns. Conversely, the regression assigns minimal
                    importance to meteorological data. This suggests that weather effects might be indirectly captured
                    within the autoregressive variables, reducing their direct impact on the model.</p>
                <p>Next, when testing the trained model on the validation data, the following performance metrics were
                    obtained:</p>
                <blockquote>R-squared: 0.8375777661567385<br>RMSE: 0.11281038105252036</blockquote>
                <h3 class="subsection-heading">KNN</h3>
                <p>A K-nearest neighbors (KNN) regressor was also trained to compare its performance with the linear
                    regression model. This algorithm identifies the k-nearest data points in the training set and
                    predicts the target value based on the average of these neighbors. The following results were
                    obtained:</p>
                <blockquote>R-squared: 0.833797321941766<br>RMSE: 0.11508586885262358</blockquote>
                <p>A K-nearest neighbors (KNN) regressor was also trained, but its performance did not surpass that of
                    the linear regression model. While KNN can capture non-linear relationships and predict values based
                    on the average of the k-nearest data points, it requires careful tuning of the 'k' parameter and can
                    be computationally intensive with larger datasets. In this case, the KNN model's metrics, such as
                    RMSE and R-squared, did not improve over the linear regression model, indicating that the linear
                    approach was more effective for predicting dock availability.</p>
                <h3 class="subsection-heading">Decision tree</h3>
                <p>
                    A Decision Tree model was trained using Grid Search to optimize parameters, resulting in slightly
                    better performance than linear regression. The optimal parameters found were max_depth=10,
                    min_samples_leaf=4, and min_samples_split=10. Metrics obtained include:</p>
                <blockquote>R-squared: 0.8398080067891416<br>RMSE: 0.11235802299216152</blockquote>
                <p>These results indicate that the Decision Tree model, with its ability to capture complex
                    relationships in the data, provided a slightly improved prediction for dock availability compared to
                    linear regression.</p>
                <h3 class="section-heading" id="cases">Study Cases</h3>
                <h3 class="subsection-heading">Case 1: Clustering of stations based on % free docks across time</h3>
                <h3 class="subsection-subtitle">1. Introduction</h3>
                <p>To uncover distinct patterns of occupation over time, we conducted an unsupervised clustering
                    analysis of the stations based on the percentage of free docks throughout 2023. We began by
                    calculating the median percentage of free docks per station for each month and day of the week,
                    creating a station_id-by-month_dayofweek matrix. This matrix was then scaled, and we performed a
                    principal component analysis (PCA) to identify the axes explaining the most variation.</p>
                <p>Using the top two principal components, we applied K-Medoids clustering. K-Medoids clustering
                    identifies k representative objects, or medoids, within the dataset. Clusters are then formed by
                    assigning each observation to the nearest medoid. K-Medoids was chosen because unlike k-means
                    clustering, it is more robust to noise and outliers due to the use of medoids instead of means as
                    cluster centers.</p>
                <p>To identify the optimal number of clusters, we used the average silhouette method. This method
                    evaluates how well each object fits within its assigned cluster (cohesion) relative to other
                    clusters (separation). The silhouette value ranges from -1 to +1, with higher values indicating that
                    an object is a good match for its own cluster and a poor match for any other cluster.</p>
                <h3 class="subsection-subtitle">2. Occupation pattern over working hours</h3>
                <p>First, we carried out the analysis explained in the introduction, using the % of free docks in most
                    common working hours (from 8 to 17 h). Below, we can observe the projection of the stations on the
                    two first principal components. PC1 almost explained 67% of the variance, while PC2 explained
                    6.62%.</p>
                <div class="img-container">
                    <img class="single-img" src="img/clustering_pca.jpg" alt="">
                </div>
                <span class="caption text-muted">PCA of % free docks by station, month and day of week</span>
                <p>Secondly, we checked the loadings of the components, in order to determine the feature contributions
                    (month_dayofweek).</p>
                <div class="img-container">
                    <img class="single-img" src="img/pc1_loadings.jpg" alt="">
                </div>
                <div class="img-container">
                    <img class="single-img" src="img/pc2_loadings.jpg" alt="">
                </div>
                <span class="caption text-muted">PCA loadings for PC1 and PC2</span>
                <p>All the months and days of the week showed similar loadings to the first components, except for
                    January and February, which had a lower contribution.</p>
                <p>Next, the silhouette score was estimated for 2 to 10 clusters in order to determine the most optimal
                    partition.</p>
                <div class="img-container">
                    <img class="single-img" src="img/silhouette_score.jpg" alt="">
                </div>
                <span class="caption text-muted">Silhouette score for different numbers of clusters</span>
                <p>Finally, a partition of k=2 was chosen as shown in the PCA plot, where the stations are colored based
                    on the clustering belonging.</p>
                <div class="img-container">
                    <img class="single-img" src="img/kmedoids_clustering.jpg" alt="">
                </div>
                <span class="caption text-muted">K-Medoids clustering on PCA-reduced data</span>
                <p>We computed the median of % of free docks for each clustering across months and day of the week.</p>
                <div class="img-container">
                    <img class="single-img" src="img/clusters_by_month.jpg" alt="">
                </div>
                <div class="img-container">
                    <img class="single-img" src="img/clusters_by_dayofweek.jpg" alt="">
                </div>
                <span class="caption text-muted">Mean values of % free docks by month/day of week for each cluster</span>
                <p>As observed in the barplot, stations in cluster 1 had a higher percentage of free docks independently
                    of the month and day of the week. January and February showed smaller differences between both
                    groups, which is in line with the lower loading of PC1.</p>
                <p>We finally tried to understand the results, plotting the clusters on the Barcelona map, highlighting
                    the neighborhoods and their corresponding altitude.</p>
                <iframe class="map" src="img/1_map_with_stations_altituted_colors_day.html"></iframe>
                <p>As can be observed in the map, the stations of group 1 (high % of free docks during working hours)
                    are mainly situated in the neighborhoods with high altitude. In contrast, the cluster 0 stations are
                    located near the coast, and thus with lower altitude. Interestingly, stations that are situated in
                    neighborhoods near high altitude areas also tend to show lower % of free docks, such as the case of
                    Sant Andreu which is near Porta and Prosperitat, areas with steep slopes. Probably, as it is a
                    downhill, people tend to take bikes in the highlands and leave them in the areas with lower
                    altitude, leaving fewer free docks in those neighborhoods. </p>
                <h3 class="subsection-subtitle">3. Occupation pattern over afternoon and evening</h3>
                <p>We performed the same PC and clustering analysis but this time filtering the observations that ranged
                    from 17 h to midnight. This way we could estimate the median % of free docks across months and days
                    of week during afternoon and evening, which we would expect to differ to some extent to the pattern
                    seen in the working hours. The optimal number of clusters was 2 according to silhouette score and
                    below we show the projection of the stations on the principal components and colored by the assigned
                    group. This time the first component explained 56% of the variance, which is lower than in the
                    working hours setting.</p>
                <div class="img-container">
                    <img class="single-img" src="img/kmedoids_clustering_2.jpg" alt="">
                </div>
                <span class="caption text-muted">K-Medoids clustering on PCA-reduced data</span>
                <p>We observed that similarly to working hours, the clusters differed in the percentage of free docks
                    across all months and days of the week, being cluster 1, the one with the lowest % of free
                    docks.</p>
                <div class="img-container">
                    <img class="single-img" src="img/clusters_by_month_2.jpg" alt="">
                </div>
                <div class="img-container">
                    <img class="single-img" src="img/clusters_by_dayofweek_2.jpg" alt="">
                </div>
                <span class="caption text-muted">Mean values of % free docks by month/day of week for each cluster</span>
                <p>We finally tried to understand the results, plotting the clusters on the Barcelona map, highlighting
                    the neighborhoods and their corresponding altitude. As shown below, the cluster 0 with higher
                    percentage of free docks, tended to group stations situated in the highlands of the city. However,
                    stations that in the workings hours had a high % of free docks (for instance, the ones near Sagrada
                    Família, Gràcia, Guinardó and other residential areas), now they are way more occupied. The same
                    pattern can be observed the other way around in some stations right next to the seaside, that now
                    show a higher % of free docks. This could be explained by the fact that people tend to use the bikes
                    to go back home and thus stations in residential areas are more occupied.</p>
                <iframe class="map" src="img/2_map_with_stations_altituted_colors_17onwards.html"></iframe>
                <h3 class="subsection-subtitle">4. Variation of the % of free docks</h3>
                <p>Some stations change their clustering group between working hours and the afternoon, while others do
                    not. To understand the usage of each station, we analyzed the variation in the percentage of free
                    docks by month and day of the week. We used the interquartile range (IQR) to measure variability,
                    which is the difference between the 75th and 25th percentiles of the data. The IQR is robust to
                    outliers, which helps mitigate the effects of bike replacement by bicing distribution or unusual
                    patterns due to holidays and events.</p>
                <p>First, we calculated the IQR for each station, month, and day of the week, creating a
                    station_id-by-month_dayofweek matrix. We then performed principal component (PC) and clustering
                    analysis. However, the first principal component only explained 16% of the variance, so no clear
                    clustering structure was detected. Therefore, we decided to consider variability as a continuous
                    measure rather than a discrete one.</p>
                <p>The map below shows the stations colored by their mean IQR across all months and days, along with the
                    available bike lanes. Interestingly, areas with higher variability are typically coastal or
                    residential areas with a high proportion of bike lanes in the surroundings. </p>
                <iframe class="map" src="img/3_map_with_stations_var_continuous_carril.html"></iframe>
                <h3 class="subsection-subtitle">5. Conclusions</h3>
                <p>Although the clustering of the stations is not perfect—since the separation between groups isn't
                    ideal and the silhouette score is below 0.7—it still provides a rough idea of different occupation
                    patterns. Stations located in neighborhoods with significant altitude differences tend to be more
                    occupied during working hours, likely because people use them to go downhill. In the afternoon,
                    these differences are less pronounced as stations in residential areas see increased usage,
                    contrasting with the coastal stations.</p>
                <p>These insights should be considered when planning bike distribution routes throughout the city and
                    across the day. Coastal stations are more occupied, as expected due to their proximity to downtown
                    and tourist areas. However, stations in Sant Andreu and La Bordeta also show similar levels of
                    occupation, despite being farther from the coast, probably due to the altitude differences with
                    adjacent neighborhoods. Moreover, the usage of the stations—estimated based on the variability of
                    the percentage of free docks—seems to be influenced by the availability of bike lanes in the
                    surrounding areas. We suggest increasing the connectivity of certain areas, especially those in the
                    northern part of the city that present lower usage in general, by adding more bike lanes to
                    encourage people to use bikes.</p>
                <h3 class="subsection-heading">Case 2: E-bikes distribution</h3>
                <h3 class="subsection-subtitle">1. Introduction</h3>
                <p>One topic meriting further exploration is the geographic distribution of electric bikes across
                    different time frames. To facilitate this analysis, the most recent 2023 data was reprocessed to
                    include columns detailing the mean number of electric and mechanical bikes.</p>
                <h3 class="subsection-subtitle">2. Interactive visualization and filtering</h3>
                <p>Using <a href="https://altair.com/">Altair</a>, a Python library to create concise and interactive
                    visualizations, a series of map plots were crafted to illustrate the distribution of electric bikes
                    across various zones in Barcelona. Each visualization comprises four distinct maps, corresponding to
                    different times of the day: morning, afternoon, evening, and night. Additionally, these plots can be
                    filtered by season and type of day, distinguishing between workdays and holidays.</p>
                <iframe class="charts-iteractive" src="img/ebikes_interactive.html"></iframe>
                <span class="caption text-muted">Average number of ebikes by neighborhood/time of day - interactive filter by day type/season </span>
                <p>Parallel visualizations were generated for the average number of mechanical bikes, highliting the
                    contrasting geographic distribution patterns between electric and mechanical bikes.</p>
                <iframe class="charts-iteractive" src="img/mechbikes_interactive.html"></iframe>
                <span class="caption text-muted">Average number of mechanical bikes by neighborhood/time of day - interactive filter by day type/season </span>
                <h3 class="subsection-subtitle">3. Summer period exploration</h3>
                <p>To narrow down the exploration of ebikes, further analysis focused on the working days of the summer
                    period, which shows significant contrasts. As the map of illustrates, while the afternoon
                    distribution is fairly even, in the evening, electric bikes tend to concentrate in higher-altitude,
                    primarily residential areas such as Camp d'en Grassot i Gràcia Nova, El Guinardó and El Baix
                    Guinardó. This leaves central and coastal zones with electric bike values lower than one.</p>
                <p>Moreover, neighborhoods with the fewest electric bikes during the evening and night in summer were
                    identified via filtering: El Barri Gòtic, Sant Père, Santa Caterina i la Ribera, La Vila Olímpica
                    del Poblenou and La Barceloneta. Additionally, 20% stations with the least electric bikes
                    available for the given season were visualized on the following map.</p>
                <iframe class="charts" src="img/least_ebikes.html"></iframe>
                <span class="caption text-muted">20% of stations with the least ebikes in summer by time of the day</span>
                <p>Next, linear plots were employed to illustrate the patterns within these specific neighborhoods and
                    to pinpoint peak hours with a dearth of ebikes. Despite the variations in hourly patterns across
                    zones, it is observed a low average number of bikes, fewer than two per station, for every station
                    and season, starting at 18:00 hrs. And particularly, for the summer the average number is lower than
                    one ebike at every station since 20 h.</p>
                <img class="img-container" src="img/least_ebikes_stations.jpg" alt="">
                <span class="caption text-muted">Mean number of ebikes by season-hour for the neighborhoods with the fewest ebikes during the summer evenings and nights</span>
                <h3 class="subsection-subtitle">4. Conclusions</h3>
                <p>From this preliminary investigation, we propose enhancing the distribution of electric bikes for
                    selected areas during the summer months. For example, reserving a specific number of bikes
                    exclusively for the time frame beginning at 20 h. This strategy would enable users to access
                    electric bicycles for returning to high-altitude neighborhoods in the evening and particularly at
                    night, when other public transportation services are reduced.</p>
            </div>
        </div>
    </div>
</article>

<hr>

<!-- Footer -->
<footer>
    <div class="container">
    </div>
</footer>

<!-- jQuery -->
<script src="vendor/jquery/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="vendor/bootstrap/js/bootstrap.min.js"></script>

<!-- Theme JavaScript -->
<script src="js/clean-blog.min.js"></script>

</body>

</html>
